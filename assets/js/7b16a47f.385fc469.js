"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8665],{20964:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>d});var t=r(85893),s=r(11151);const c={},o="Include References",a={id:"server/rag/references",title:"Include References",description:"You can include references to the data sources that you use in your chatbot",source:"@site/docs/server/rag/references.md",sourceDirName:"server/rag",slug:"/server/rag/references",permalink:"/chatbot/server/rag/references",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb/chatbot/tree/main/docs/docs/server/rag/references.md",tags:[],version:"current",frontMatter:{},sidebar:"main",previous:{title:"Retrieve Context Information",permalink:"/chatbot/server/rag/retrieve"},next:{title:"Customize Server Logic",permalink:"/chatbot/server/custom-logic"}},i={},d=[{value:"Format References",id:"format-references",level:2},{value:"Do Not Include References",id:"do-not-include-references",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"include-references",children:"Include References"}),"\n",(0,t.jsx)(n.p,{children:"You can include references to the data sources that you use in your chatbot\nin the response. This allows you to link to the original source of the information, and provide more context to the user."}),"\n",(0,t.jsxs)(n.p,{children:["These references are included in the ",(0,t.jsx)(n.code,{children:"references"})," property of the response\nfrom the ",(0,t.jsx)(n.a,{href:"../openapi#operation/createConversation",children:(0,t.jsx)(n.code,{children:"POST /conversations/:conversationId/messages"})}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"format-references",children:"Format References"}),"\n",(0,t.jsxs)(n.p,{children:["Format the references in the response using a ",(0,t.jsx)(n.a,{href:"/chatbot/reference/server/modules#makereferencelinksfunc",children:(0,t.jsx)(n.code,{children:"MakeReferenceLinksFunc"})})," function."]}),"\n",(0,t.jsxs)(n.p,{children:["To generate references, include a ",(0,t.jsx)(n.code,{children:"MakeReferenceLinksFunc"}),"\nin the ",(0,t.jsx)(n.a,{href:"/chatbot/reference/server/interfaces/MakeRagGenerateUserPromptParams#makereferencelinks",children:(0,t.jsx)(n.code,{children:"MakeRagGenerateUserPromptParams.makeReferenceLinks"})})," property."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'import { makeRagGenerateUserPrompt } from "mongodb-chatbot-server";\nimport { someMakeReferenceLinksFunc } from "./someMakeReferenceLinksFunc"; // example\n\nconst ragGenerateUserPrompt = makeRagGenerateUserPrompt({\n  makeReferenceLinks: someMakeReferenceLinksFunc,\n  // ...other config\n});\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The framework comes with the ",(0,t.jsx)(n.code,{children:"MakeReferenceLinksFunc"}),", ",(0,t.jsx)(n.a,{href:"/chatbot/reference/server/modules#makedefaultreferencelinksfunc",children:(0,t.jsx)(n.code,{children:"makeDefaultReferenceLinksFunc()"})}),". Its returns\nthe following data for chunks from ",(0,t.jsx)(n.em,{children:"unique"})," URLs."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"{\n  title: chunk.metadata.pageTitle ?? chunk.url, // if title doesn't exist, just put url\n  url: chunk.url // this always exists\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"do-not-include-references",children:"Do Not Include References"}),"\n",(0,t.jsx)(n.p,{children:"To not include references, simply pass a function that returns an empty array."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:'import {\n  MakeReferenceLinksFunc,\n  makeRagGenerateUserPrompt,\n} from "mongodb-chatbot-server";\n\nconst noReferencesFunc: MakeReferenceLinksFunc = () => [];\n\nconst ragGenerateUserPrompt = makeRagGenerateUserPrompt({\n  makeReferenceLinks: noReferencesFunc,\n  // ...other config\n});\n'})})]})}function u(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},11151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>o});var t=r(67294);const s={},c=t.createContext(s);function o(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);