<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-server/evaluation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Evaluation | MongoDB Knowledge Service</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://mongodb.github.io/chatbot/server/evaluation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Evaluation | MongoDB Knowledge Service"><meta data-rh="true" name="description" content="This guide is a work in progress. Currently, it just contains"><meta data-rh="true" property="og:description" content="This guide is a work in progress. Currently, it just contains"><link data-rh="true" rel="canonical" href="https://mongodb.github.io/chatbot/server/evaluation"><link data-rh="true" rel="alternate" href="https://mongodb.github.io/chatbot/server/evaluation" hreflang="en"><link data-rh="true" rel="alternate" href="https://mongodb.github.io/chatbot/server/evaluation" hreflang="x-default"><link rel="stylesheet" href="/chatbot/assets/css/styles.d95408d0.css">
<script src="/chatbot/assets/js/runtime~main.d8565e00.js" defer="defer"></script>
<script src="/chatbot/assets/js/main.76366839.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/chatbot/"><b class="navbar__title text--truncate">MongoDB Knowledge Service</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mongodb/chatbot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/server/openapi">OpenAPI Specification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/server/responses-api">Responses API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/server/context-engineering">Context Engineering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/chatbot/server/evaluation">Evaluation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/ui">Chatbot UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/data-sources">Data Sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/datasets">Datasets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/contact">Contact</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chatbot/framework">Framework (deprecated)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/chatbot/reference/">API Reference</a><button aria-label="Expand sidebar category &#x27;API Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/chatbot/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Evaluation</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Evaluation</h1>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Work in Progress</div><div class="admonitionContent_BuS1"><p>This guide is a work in progress. Currently, it just contains
the minimum information to get started writing evals
against the MongoDB Responses API</p></div></div>
<p>This guide contains information about writing evaluations against the <a href="/chatbot/server/responses-api">MongoDB Responses API</a>.</p>
<p>When developing against the Responses API, you should write evaluations to understand the quality of your AI system and iteratively improve it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="do-not-use-sensitive-customer-data-in-evaluations">Do Not Use Sensitive Customer Data in Evaluations<a href="#do-not-use-sensitive-customer-data-in-evaluations" class="hash-link" aria-label="Direct link to Do Not Use Sensitive Customer Data in Evaluations" title="Direct link to Do Not Use Sensitive Customer Data in Evaluations">​</a></h2>
<p>NEVER use sensitive customer data in your evaluations. Period.</p>
<p>Use either fake data or anonymize real customer data, in line with information security best practices.
If you are not sure if you can use some data, assume that you cannot.
Reach out to the Information Security team with any questions about data usage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="evaluation-api">Evaluation API<a href="#evaluation-api" class="hash-link" aria-label="Direct link to Evaluation API" title="Direct link to Evaluation API">​</a></h2>
<p>To run evaluations against the MongoDB Responses API, use the following base endpoint:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">https://chat-server.docs.staging.corp.mongodb.com/api/v1/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This endpoint bypasses the Web Application Firewall (WAF) and CloudFront protections that we have on the standard staging API, <code>http://knowledge.staging.corp.mongodb.com/</code>, and the production API <code>http://knowledge.mongodb.com/</code>. Do not run evaluations against these APIs. You will get <code>4XX</code> errors from CloudFront!</p>
<p>To use the evaluation API, you must authenticate. Refer to the following section for authentication information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication">Authentication<a href="#authentication" class="hash-link" aria-label="Direct link to Authentication" title="Direct link to Authentication">  ​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Intentionally Vague</div><div class="admonitionContent_BuS1"><p>This section is intentionally a bit vague because this docs site is currently on the public internet, and we do not want to expose much information on our internal authentication systems. Sorry!</p><p>If you have any questions, <a href="/chatbot/contact">contact the Education AI team</a>.</p></div></div>
<p>Unlike the standard staging/production APIs, you must authenticate into the evaluation API. Authenticate with the header <code>X-Kanopy-Authorization: Bearer {{authToken}}</code>.</p>
<p>You can use the <code>kanopy-oidc</code> utility to get an auth token:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kanopy-oidc login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Minimal example with curl:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -i -X POST https://chat-server.docs.staging.corp.mongodb.com/api/v1/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-H &quot;X-Kanopy-Authorization: Bearer $(kanopy-oidc login)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If <strong>authentication works</strong>, you should receive a <code>200</code> response resembling:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/2 200 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...other stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">event: error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data: {&quot;status&quot;:400,&quot;headers&quot;:{},&quot;requestID&quot;:null,&quot;error&quot;:{&quot;type&quot;:&quot;error&quot;,&quot;code&quot;:&quot;invalid_request_error&quot;,&quot;message&quot;:&quot;Path: body.model - Required | Path: body.input - Invalid input | Path: body.stream - Required&quot;,&quot;name&quot;:&quot;Error&quot;},&quot;code&quot;:&quot;invalid_request_error&quot;,&quot;param&quot;:null,&quot;type&quot;:&quot;error&quot;,&quot;sequence_number&quot;:0}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If <strong>authentication does not work</strong>, you should receive a <code>302</code> response resembling:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">HTTP/2 302 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...other stuff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;a href=&quot;https://login.corp.mongodb.com/login?redirect=https%3A%2F%2Fchat-server.docs.staging.corp.mongodb.com%2Fapi%2Fv1%2F&quot;&gt;Found&lt;/a&gt;.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The response is <code>302</code> because its redirecting you to login through a UI,
which you cannot do when programmatically running evals.</p>
<p>You can programmatically inject the token into locally-run evaluations with an environment variable:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MY_ENV_VAR=$(kanopy-oidc login) npx braintrust eval path/to/some.eval.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="evaluation-in-cicd">Evaluation in CI/CD<a href="#evaluation-in-cicd" class="hash-link" aria-label="Direct link to Evaluation in CI/CD" title="Direct link to Evaluation in CI/CD">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Coming Soon</div><div class="admonitionContent_BuS1"><p>Sorry, not yet 😢</p></div></div>
<p>Currently, you cannot run evaluations in a CI/CD environment. We will add this feature after we complete a migration of our server to a new environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="braintrust-evaluation-platform">Braintrust Evaluation Platform<a href="#braintrust-evaluation-platform" class="hash-link" aria-label="Direct link to Braintrust Evaluation Platform" title="Direct link to Braintrust Evaluation Platform">​</a></h2>
<p>We use <a href="https://www.braintrust.dev/home" target="_blank" rel="noopener noreferrer">Braintrust</a> as an evaluation platform as a service. You can run evaluations in it. To learn more about Braintrust, refer to its official documentation, <a href="https://braintrust.com/docs" target="_blank" rel="noopener noreferrer">https://braintrust.com/docs</a>.</p>
<p>To set up Braintrust, <a href="/chatbot/contact">contact the Education AI team</a>. The Education AI team will:</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Add you to Slack channel <code>#ext-braintrust-mongodb</code>. You can talk to the Braintrust team in this channel or get any necessary support.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Create a permission group and project in the <code>mongodb-education-ai</code> Braintrust organization for your team to use. In your team&#x27;s project you can <a href="#run-evaluations">run evaluations</a>.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Add you as a viewer to the <a href="#responses-api-staging-tracing">Responses API staging tracing</a>. This way you can see what is happening on the MongoDB responses API when you make requests to it.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-evaluations">Run Evaluations<a href="#run-evaluations" class="hash-link" aria-label="Direct link to Run Evaluations" title="Direct link to Run Evaluations">​</a></h3>
<p>Run evaluations for your application&#x27;s use of the Responses API using the Braintrust SDK. For more information on using the SDK, refer to the SDK documentation, <a href="https://www.braintrust.dev/docs/start/eval-sdk" target="_blank" rel="noopener noreferrer">https://www.braintrust.dev/docs/start/eval-sdk</a>.</p>
<p>To see some example evaluations, refer to the evaluation suite that the Responses API uses internally, <a href="https://github.com/mongodb/chatbot/blob/main/packages/chatbot-server-mongodb-public/src/conversations.eval.ts" target="_blank" rel="noopener noreferrer"><code>conversations.eval.ts</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="responses-api-staging-tracing">Responses API Staging Tracing<a href="#responses-api-staging-tracing" class="hash-link" aria-label="Direct link to Responses API Staging Tracing" title="Direct link to Responses API Staging Tracing">​</a></h3>
<p>When evaluating your AI application that uses the MongoDB Responses API,
it can be useful to see what&#x27;s happening inside the Responses API.</p>
<p>All calls to the staging Responses API are traced by default. Tracing is only disabled if you set the body param <code>store: true</code>. You should <strong>never</strong> set <code>store: true</code> in your evaluations.</p>
<p>To access the staging API traces, go to the <a href="https://www.braintrust.dev/app/mongodb-education-ai/p/chatbot-responses-staging/logs" target="_blank" rel="noopener noreferrer">chatbot-responses-staging Logs in Braintrust</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/mongodb/chatbot/tree/main/docs/docs/server/evaluation.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/chatbot/server/context-engineering"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Context Engineering</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/chatbot/ui"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Chatbot UI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#do-not-use-sensitive-customer-data-in-evaluations" class="table-of-contents__link toc-highlight">Do Not Use Sensitive Customer Data in Evaluations</a></li><li><a href="#evaluation-api" class="table-of-contents__link toc-highlight">Evaluation API</a><ul><li><a href="#authentication" class="table-of-contents__link toc-highlight">Authentication</a></li><li><a href="#evaluation-in-cicd" class="table-of-contents__link toc-highlight">Evaluation in CI/CD</a></li></ul></li><li><a href="#braintrust-evaluation-platform" class="table-of-contents__link toc-highlight">Braintrust Evaluation Platform</a><ul><li><a href="#run-evaluations" class="table-of-contents__link toc-highlight">Run Evaluations</a></li><li><a href="#responses-api-staging-tracing" class="table-of-contents__link toc-highlight">Responses API Staging Tracing</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/chatbot/">Home</a></li><li class="footer__item"><a href="https://github.com/mongodb/chatbot" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div></div></footer></div>
</body>
</html>